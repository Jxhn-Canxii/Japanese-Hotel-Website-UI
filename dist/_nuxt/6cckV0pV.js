import{r as n,s as g,c as i,a as o,t as b,i as x,n as h,k as d,v as u,o as m,S as a,h as v,V as y,x as _}from"./kLS1Tq6J.js";import{FormDx as k,handleApiError as S}from"./Bk09pi9Z.js";const E={class:"flex justify-center items-center min-h-screen bg-emerald-800 p-4"},L={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-sm"},P={key:0,class:"bg-red-500 text-white text-sm p-2 mb-4 rounded"},V={class:"mb-4"},A={class:"mb-6"},q={__name:"login",setup(D){const l=n(""),c=g(),t=n({email:"",password:""}),p=async()=>{const r=a.fire({title:"Logging in...",text:"Please wait while we authenticate you.",allowOutsideClick:!1,didOpen:()=>{a.showLoading()}});try{const e=k(t.value),s=await v.post(`${y}login`,e),{token:f,userInfo:w}=s.data;_().setAuthData(f,w),r.close(),c.push("/cms/dashboard")}catch{r.close(),S(l),a.fire({icon:"error",title:"Login failed",text:l.value||"Something went wrong. Please try again."})}};return(r,e)=>(m(),i("div",E,[o("div",L,[e[5]||(e[5]=o("h1",{class:"text-3xl font-semibold text-center text-emerald-900 mb-6"}," Login ",-1)),l.value?(m(),i("div",P,b(l.value),1)):x("",!0),o("form",{onSubmit:h(p,["prevent"])},[o("div",V,[e[2]||(e[2]=o("label",{for:"email",class:"block text-sm font-medium text-emerald-900 mb-2"},"Email",-1)),d(o("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=s=>t.value.email=s),required:"",class:"w-full p-2 border border-emerald-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Enter your email"},null,512),[[u,t.value.email]])]),o("div",A,[e[3]||(e[3]=o("label",{for:"password",class:"block text-sm font-medium text-emerald-900 mb-2"},"Password",-1)),d(o("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=s=>t.value.password=s),required:"",class:"w-full p-2 border border-emerald-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Enter your password"},null,512),[[u,t.value.password]])]),e[4]||(e[4]=o("button",{type:"submit",class:"w-full py-2 px-4 bg-yellow-500 text-white font-bold rounded-lg hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-500"}," Login ",-1))],32)])]))}};export{q as default};
